<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>DeltaImg Demo 2</title>
    <link rel="stylesheet" type="text/css" href="style/main.css">
</head>
<body>
<a href="http://hacks.philingrey.com/2012/03/deltaimg-resolution-and-bandwidth-responsive-images/"><- Back to blog</a>
<h2 id="header">First Test</h2>
<div id="output1">Running</div>
<h2 id="header">Second Test</h2>
<div id="output2"></div>
<div>
	<img style="float:left" width="49%" id="img1">
	<img style="float:left" width="49%" id="img2">
</div>

<script>
window.onload = function(){
	var img1 = document.getElementById('img1')
	  , img2 = new Image()
	  , img3 = new Image()
	  , img4 = document.getElementById('img2')
	  , start = new Date().getTime()
	  , timer;
	  
	img1.onload=function(){
		timer = new Date().getTime();
		document.getElementById("output1").innerHTML = "Low res image loaded (total: "+(timer-start)/1000+" secs)";
		img2.onload=function(){
			timer = new Date().getTime();
			document.getElementById("output1").innerHTML += "<br>Medium res image loaded (total: "+(timer-start)/1000+" secs)";
			img3.onload=function(){
				timer = new Date().getTime();
				document.getElementById("output1").innerHTML += "<br>Final delta image loaded (total: "+(timer-start)/1000+" secs)";
				document.getElementById("output2").innerHTML = "Running";
				start = new Date().getTime();
	
				img4.onload=function(){
					timer = new Date().getTime();
					document.getElementById("output2").innerHTML = "Here's how long it would have taken to get any image without deltaImg (total: "+(timer-start)/1000+" secs)";
				};
				img4.src="images/big_city.jpg";
			};
			img3.src="images/small_city.jpg";
		};
		img2.src="images/small_city.jpg";
	};
	img1.src="images/small_city.jpg";
}

</script>
</body>
</html>
